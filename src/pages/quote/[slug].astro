---
import { getSlugFromFilePath } from "$lib/paths";
import Base from "$layouts/Base.astro";

export async function getStaticPaths() {
  const quotes = await Astro.glob("../../lib/quotes/**/*.md");
  const nonDraftQuotes = quotes.filter((post) => !post.frontmatter.draft);

  const staticPaths = nonDraftQuotes.map((quote) => {
    const { file } = quote;
    const slug = getSlugFromFilePath(file);

    return {
      params: { slug },
      props: { quote },
    };
  });

  return staticPaths;
}

const { slug } = Astro.params;
const { quote } = Astro.props;
---

<Base title="Quote">{quote.frontmatter.text}</Base>
