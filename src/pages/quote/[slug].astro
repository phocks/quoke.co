---
import Base from "$layouts/Base.astro";

export async function getStaticPaths() {
  function getSlugs(items) {
    return items.map((item) => {
      const { file } = item;
      const slug = file.match(/[^\\/]+?(?=\.\w+$)/);
      return slug[0];
    });
  }

  const posts = await Astro.glob("../../lib/quotes/**/*.md");
  const nonDraftPosts = posts.filter((post) => !post.frontmatter.draft);
  const slugs = getSlugs(nonDraftPosts);
  return slugs.map((slug) => ({
    params: { slug },
  }));
}

const { slug } = Astro.params;
console.log(slug);
---

<Base title="Quote">Hello!</Base>
